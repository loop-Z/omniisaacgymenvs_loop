<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from src/usv-simulator/gazebo_description/otter/otter_gazebo/urdf/otter_gazebo.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- Defines the Otter USV with gazebo plugins for dynamics and thrust -->
<robot name="otter">
  <!-- Define macros -->
  <!-- Call the macros defined above -->
  <material name="Black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="Gray">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <material name="DarkGray">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="White">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="Yellow">
    <color rgba="1.0 0.8 0.0 1.0"/>
  </material>
  <!-- com : center of mass -->
  <!-- in kg-->
  <!-- at center of mass aligned with coordinate system, kg*m^2-->
  <!-- base_footprint is a fictitious link(frame) that is on the ground right below base_link origin, navigation stack depends on this frame -->
  <!-- <link name="base_footprint">
    <inertial>
      <mass value="0.00001"/>
      <origin xyz="0 0 0.1"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
    </visual>
  </link> -->
  <!-- <gazebo reference="base_footprint">
    <turnGravityOff>false</turnGravityOff>
  </gazebo> -->
  <link name="base_link">
  </link>
  <!--Actual body/chassis of the robot-->
  <link name="dummy_link">
    <inertial>
      <mass value="29"/>
      <origin xyz="0 0 0.29"/>
      <!-- Center of mass -->
      <inertia ixx="10" ixy="0" ixz="0" iyy="10" iyz="0" izz="10"/>
    </inertial>
    <visual>
      <origin rpy="0 0 -1.5707963267948966" xyz="0 0 0.6"/>
      <geometry>
        <mesh filename="/home/huangtao/Workspace/0_AprilArk/nn_mpc_ws/src/usv-simulator/gazebo_description/otter/otter_description/meshes/otter/otter.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.5707963267948966 0 1.5707963267948966" xyz="-0.3 0 0.1"/>
      <geometry>
        <box size="1.0 0.3 1.7"/>
      </geometry>
    </collision>
  </link>
  <!-- <joint name="base_footprint_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="base_footprint"/>
  </joint> -->
  <gazebo reference="base_link">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <joint name="dummy_joint" type="fixed">
    <parent link="base_link"/>
    <child link="dummy_link"/>
  </joint>
  <link name="left_propeller_link">
    <visual>
      <geometry>
        <mesh filename="/home/huangtao/Workspace/0_AprilArk/nn_mpc_ws/src/usv-simulator/gazebo_description/otter/otter_description/meshes/propeller.dae" scale="0.45 0.45 0.45" />
      </geometry>
    </visual>
    <collision name="left_propeller_collision">
      <origin rpy="0 1.57 0" xyz="-0.08 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.24"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.008545" ixy="0.0" ixz="0.0" iyy="0.008545" iyz="0.0" izz="0.0144"/>
    </inertial>
  </link>
  <joint name="left_engine_propeller_joint" type="continuous">
    <axis rpy="0 0 0" xyz="1 0 0"/>
    <parent link="base_link"/>
    <child link="left_propeller_link"/>
    <origin rpy="0 0 0" xyz="-0.89 0.395 -0.07"/>
    <limit effort="100" velocity="100"/>
    <dynamics damping="0.05" friction="0.05"/>
  </joint>
  <gazebo reference="left_propeller_link">
    <material>Gazebo/Orange</material>
  </gazebo>
  <link name="right_propeller_link">
    <visual>
      <geometry>
        <mesh filename="/home/huangtao/Workspace/0_AprilArk/nn_mpc_ws/src/usv-simulator/gazebo_description/otter/otter_description/meshes/propeller.dae" scale="0.45 0.45 0.45" />
      </geometry>
    </visual>
    <collision name="right_propeller_collision">
      <origin rpy="0 1.57 0" xyz="-0.08 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.24"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.008545" ixy="0.0" ixz="0.0" iyy="0.008545" iyz="0.0" izz="0.0144"/>
    </inertial>
  </link>
  <joint name="right_engine_propeller_joint" type="continuous">
    <axis rpy="0 0 0" xyz="1 0 0"/>
    <parent link="base_link"/>
    <child link="right_propeller_link"/>
    <origin rpy="0 0 0" xyz="-0.88 -0.395 -0.07"/>
    <limit effort="100" velocity="100"/>
    <dynamics damping="0.05" friction="0.05"/>
  </joint>
  <gazebo reference="right_propeller_link">
    <material>Gazebo/Orange</material>
  </gazebo>
  <!--Gazebo Plugin for simulating Otter dynamics-->
  <gazebo>
    <plugin filename="libusv_gazebo_dynamics_plugin.so" name="usv_dynamics_otter">
      <bodyName>base_link</bodyName>
      <!-- Must be same as the ocean model!-->
      <waterLevel>0</waterLevel>
      <waterDensity>997.8</waterDensity>
      <!-- Added mass -->
      <xDotU>5.0</xDotU>
      <yDotV>5.0</yDotV>
      <nDotR>1.0</nDotR>
      <!-- Linear and quadratic drag -->
      <!-- <xU>20.0</xU>
        <xUU>2.0</xUU>
        <yV>20.0</yV>
        <yVV>1.0</yVV>
        <zW>50.0</zW> 
        <kP>20.0</kP>
        <mQ>20.0</mQ>
        <nR>20.0</nR>
        <nRR>5.0</nRR>  -->
      <xU>20.0</xU>
      <xUU>0.0</xUU>
      <yV>20.0</yV>
      <yVV>0.0</yVV>
      <zW>50.0</zW>
      <kP>20.0</kP>
      <mQ>20.0</mQ>
      <nR>20.0</nR>
      <nRR>0.0</nRR>
      <!-- General dimensions -->
      <hullRadius>0.1</hullRadius>
      <boatWidth>1.2</boatWidth>
      <boatLength>2.0</boatLength>
      <!-- Length discretization, AKA, "N" -->
      <length_n>2</length_n>
      <wave_model>ocean_waves</wave_model>
    </plugin>
  </gazebo>
  <gazebo>
    <plugin filename="libusv_gazebo_thrust_plugin.so" name="otter_gazebo_thrust">
      <cmdTimeout>1.0</cmdTimeout>
      <publisherRate>100.0</publisherRate>
      <robotNamespace>usv</robotNamespace>
      <thruster>
        <linkName>left_propeller_link</linkName>
        <propJointName>left_engine_propeller_joint</propJointName>
        <engineJointName>left_engine_propeller_joint</engineJointName>
        <cmdTopic>left_thrust_cmd</cmdTopic>
        <enableAngle>False</enableAngle>
        <!-- mappingType   0: linear 1: GLF 2: square(Otter) -->
        <mappingType>0</mappingType>
        <maxCmd>1.0</maxCmd>
        <!-- maxForceFwd and Rev for one thruster ref: theory_of_operation.pdf -->
        <maxForceFwd>100</maxForceFwd>
        <maxForceRev>-100</maxForceRev>
      </thruster>
      <thruster>
        <linkName>right_propeller_link</linkName>
        <propJointName>right_engine_propeller_joint</propJointName>
        <engineJointName>right_engine_propeller_joint</engineJointName>
        <cmdTopic>right_thrust_cmd</cmdTopic>
        <enableAngle>False</enableAngle>
        <!-- mappingType   0: linear 1: GLF 2: square(Otter) -->
        <mappingType>0</mappingType>
        <maxCmd>1.0</maxCmd>
        <!-- maxForceFwd and Rev for one thruster ref: theory_of_operation.pdf -->
        <maxForceFwd>100</maxForceFwd>
        <maxForceRev>-100</maxForceRev>
      </thruster>
    </plugin>
  </gazebo>
</robot>
